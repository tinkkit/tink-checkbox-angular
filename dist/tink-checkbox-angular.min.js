/*! tink-checkbox-angular v1.0.6 */
"use strict";!function(module){try{module=angular.module("tink.checkbox")}catch(e){module=angular.module("tink.checkbox",[])}module.controller("TinkCheckboxController",["$scope","$filter","$compile",function(scope,$filter,$compile){function changeCheckValue(arr,value){arr.forEach(function(element){config.scope.secretIndeterminate["id"+element.id]=!1,config.scope.secretSelected["id"+element.id]=value;var obj=element;obj&&obj.children&&obj.children instanceof Array&&obj.children.length>0&&changeCheckValue(obj.children,value)})}function countValues(arr){var values={checked:0,indeterminate:0};return arr.forEach(function(element){var safeId="id"+element.id,inder=config.scope.secretIndeterminate[safeId],check=config.scope.secretSelected[safeId];inder?values.indeterminate++:check&&values.checked++}),values.all=values.checked===arr.length,values}function resetValue(id){config.scope.secretSelected[id]=!1,config.scope.secretIndeterminate[id]=!1}function checkState(selected){if(selected&&selected.children&&selected.children.length>0){var counts=countValues(selected.children),safeID="id"+selected.id;resetValue(safeID),counts.all?config.scope.secretSelected[safeID]=!0:(counts.checked>0||counts.indeterminate>0)&&(config.scope.secretIndeterminate[safeID]=!0)}}function objectToWatch(arr){var found={watch:[],parents:[]};return arr&&arr instanceof Array&&arr.forEach(function(element){var obj=element,myChild=null;obj&&obj.children&&obj.children instanceof Array&&obj.children.length>0?(found.parents.push(obj),myChild=objectToWatch(obj.children),found.watch=found.watch.concat(myChild.watch),found.parents=found.parents.concat(myChild.parents)):found.watch.push(obj)}),found}function createCheckbox(name,text,checked){checked=checked===!0?"checked":"";var label='<div class="checkbox"><input type="checkbox" ng-class="{indeterminate:secretIndeterminate.id'+name+'}" ng-change="checkboxChange(\'id'+name+'\')" ng-model="secretSelected.id'+name+'" name="id'+name+'" id="id'+name+'" '+checked+'><label for="id'+name+'">'+text+"</label></div>";return label}var self=this;this.groups={};var parents,config={};this.init=function(scope){config.scope=scope,config.scope.checkboxSelect={},config.scope.secretIndeterminate={},config.scope.secretSelected={},(null===scope.checked||void 0===scope.checked||!scope.checked instanceof Array)&&(scope.checked=[]),self.mapArray(config.scope.ngModel,config.scope.secretSelected);var children=objectToWatch(config.scope.ngModel).watch;children.forEach(function(element){config.scope.secretSelected["id"+element.id]=element.selected}),parents=objectToWatch(config.scope.ngModel).parents,parents.reverse().forEach(function(element){checkState(element)})},this.mapArray=function(arr,map){arr&&arr instanceof Array&&arr.forEach(function(element){var obj=element;scope.checked&&-1!==scope.checked.indexOf(obj.id)?obj.selected=!0:obj.selected=!1,map["id"+obj.id]=obj.selected,obj&&obj.children&&obj.children instanceof Array&&obj.children.length>0&&self.mapArray(obj.children,map)})},scope.checkboxChange=function(id,obj){var selected;selected=null!==obj&&void 0!==obj?obj:scope.findTheParent(config.scope.ngModel,id);var valueSelected=config.scope.secretSelected[id];config.scope.secretIndeterminate[id]=!1,selected.obj.children&&changeCheckValue(selected.obj.children,valueSelected),selected.newd?selected.newd.forEach(function(element){checkState(element)}):checkState(selected.obj)},scope.findTheParent=function(arr,id){var found=!1;return arr.forEach(function(element){if(found===!1||void 0===found){var isMyChild,obj=element,safeId="id"+obj.id;return safeId===id?(found={go:!0,obj:obj},!0):(obj&&obj.children&&obj.children instanceof Array&&obj.children.length>0&&(isMyChild=scope.findTheParent(obj.children,id)),void(isMyChild!==!1&&"object"==typeof isMyChild&&isMyChild.go?(found={parent:obj,obj:isMyChild.obj,newd:[]},found.newd.push(obj),isMyChild.go=!1):(isMyChild&&isMyChild.newd&&isMyChild.newd.push(obj),found=isMyChild)))}}),found},this.element=null;var watchers={};this.createTemplate=function(arr){var template=self.teken(arr);return this.element=$compile(template)(scope),parents.reverse().forEach(function(element){checkState(element)}),watchers.secretIndeterminate&&watchers.secretIndeterminate(),watchers.secretSelected&&watchers.secretSelected(),watchers.secretIndeterminate=scope.$watch("secretIndeterminate",function(newI){for(var id in newI)newI[id]&&($(self.element).find("input[name="+id+"]").attr("checked",!1),config.scope.secretSelected[id]=!1),$(self.element).find("input[name="+id+"]").prop("indeterminate",newI[id])},!0),watchers.secretSelected=scope.$watch("secretSelected",function(newI){for(var id in newI){var Did=id.substr(2,id.length),index=scope.checked.indexOf(Did);if(newI[id]){var data=scope.findTheParent(config.scope.ngModel,id);-1!==index||data.obj.children&&data.obj.children>0||scope.checked.push(Did)}else-1!==index&&scope.checked.splice(index,1)}},!0),this.element},this.teken=function(arr,parent){void 0===parent?parent="":parent+=".children";var aantal=0,str='<ul class="checkbox-intermediate">';return arr.forEach(function(element){var obj=element,subparent=parent+"["+aantal+"]";str+="<li>",scope.checked&&-1!==scope.checked.indexOf(obj.id)?obj.slected=!0:obj.slected=!1,str+=createCheckbox(obj.id,obj.name,obj.selected,subparent),obj&&obj.children&&obj.children instanceof Array&&obj.children.length>0&&(str+=self.teken(obj.children,subparent)),str+="</li>",aantal++}),str+="</ul>"}}])}(),function(module){try{module=angular.module("tink.checkbox")}catch(e){module=angular.module("tink.checkbox",[])}module.directive("tinkCheckboxList",[function(){return{restrict:"A",controller:"TinkCheckboxController",replace:!1,scope:{ngModel:"=",checked:"="},link:function(scope,element,attrs,checkboxCtrl){function unique(list){var result=[];return $.each(list,function(i,e){-1===$.inArray(e,result)&&result.push(e)}),result}var elementHulp;scope.$watch("ngModel",function(){checkboxCtrl.init(scope,attrs.ngModel),scope.ngModel instanceof Array&&(elementHulp=checkboxCtrl.createTemplate(scope.ngModel),element.replaceWith(elementHulp),element=elementHulp)},!0),scope.$watch("checked",function(newD,oldD){var uniqueT=unique(newD);if(uniqueT.length!==newD.length)return void(scope.checked=uniqueT);var added=$(newD).not(oldD).get(),removed=$(oldD).not(newD).get();added.forEach(function(element){var obj=scope.findTheParent(scope.ngModel,"id"+element);obj.obj&&(obj.obj.children&&obj.obj.children.length>0||(scope.secretSelected["id"+element]=!0,scope.checkboxChange("id"+element,obj)))}),removed.forEach(function(element){var obj=scope.findTheParent(scope.ngModel,"id"+element);obj.obj&&(obj.obj.children&&obj.obj.children.length>0||(scope.secretSelected["id"+element]=!1,scope.checkboxChange("id"+element,obj)))})},!0)}}}])}();
//# sourceMappingURL=tink-checkbox-angular.min.map